-- Tambahkan ini di bagian atas skrip
local ControlModule = require(LocalPlayer:WaitForChild("PlayerScripts"):WaitForChild("PlayerModule")):GetControls()

RunService.Heartbeat:Connect(function()
    if _G.AccelEnabled then
        local char = LocalPlayer.Character
        local hum = char and char:FindFirstChildOfClass("Humanoid")
        local seat = hum and hum.SeatPart
        
        if seat and seat:IsA("VehicleSeat") then
            -- Mendeteksi arah gerak dari Joystick Tablet
            local moveVector = ControlModule:GetMoveVector()
            local isMovingForward = moveVector.Z < -0.1 -- Jika joystick didorong ke depan
            
            if isMovingForward then
                if _G.CurrentSpeed < _G.MaxPower then
                    _G.CurrentSpeed = _G.CurrentSpeed + 2 
                end
                
                -- Gunakan gaya Horizontal saja
                local forwardVel = seat.CFrame.LookVector * _G.CurrentSpeed
                seat.AssemblyLinearVelocity = Vector3.new(forwardVel.X, seat.AssemblyLinearVelocity.Y, forwardVel.Z)
            else
                _G.CurrentSpeed = math.max(0, _G.CurrentSpeed - 5)
            end
        end
    end
end)


-- Tambahkan variabel ini di bagian atas skrip
local BodyVelocity = Instance.new("LinearVelocity")
local Attachment = Instance.new("Attachment")
BodyVelocity.MaxForce = 0 -- Mulai dengan 0 agar tidak langsung melesat

RunService.Heartbeat:Connect(function()
    if _G.AccelEnabled then
        local char = LocalPlayer.Character
        local hum = char and char:FindFirstChildOfClass("Humanoid")
        local seat = hum and hum.SeatPart
        
        if seat and seat:IsA("VehicleSeat") then
            -- Pasang attachment jika belum ada
            if not Attachment.Parent or Attachment.Parent ~= seat then
                Attachment.Parent = seat
                BodyVelocity.Parent = seat
                BodyVelocity.Attachment0 = Attachment
                BodyVelocity.RelativeTo = Enum.ActuatorRelativeTo.World
            end

            -- Logika Kecepatan
            if seat.Throttle ~= 0 then
                if _G.CurrentSpeed < _G.MaxPower then
                    _G.CurrentSpeed = _G.CurrentSpeed + 2 
                end
                
                -- Gunakan gaya hanya pada arah Horizontal (X, Z)
                local moveDir = seat.CFrame.LookVector * (seat.Throttle * _G.CurrentSpeed)
                BodyVelocity.VectorVelocity = Vector3.new(moveDir.X, seat.AssemblyLinearVelocity.Y, moveDir.Z)
                BodyVelocity.MaxForce = 50000 -- Berikan tenaga
            else
                -- Rem halus saat lepas gas
                _G.CurrentSpeed = math.max(0, _G.CurrentSpeed - 5)
                if _G.CurrentSpeed == 0 then
                    BodyVelocity.MaxForce = 0
                end
            end
        else
            BodyVelocity.MaxForce = 0 -- Matikan jika turun dari mobil
        end
    else
        BodyVelocity.MaxForce = 0
    end
end)
