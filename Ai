local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local LocalPlayer = Players.LocalPlayer

_G.AccelEnabled = false

-- // SETUP UI //
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local Btn = Instance.new("TextButton", ScreenGui)
Btn.Size = UDim2.new(0, 150, 0, 50)
Btn.Position = UDim2.new(0.05, 0, 0.4, 0)
Btn.Text = "AUTO-W: OFF"
Btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Btn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", Btn)

Btn.Activated:Connect(function()
    _G.AccelEnabled = not _G.AccelEnabled
    Btn.Text = "AUTO-W: " .. (_G.AccelEnabled and "ON" or "OFF")
    Btn.BackgroundColor3 = _G.AccelEnabled and Color3.fromRGB(0, 200, 255) or Color3.fromRGB(30, 30, 30)
end)

-- // LOGIKA SIMULASI KEYBOARD //
local isWPressed = false

RunService.Heartbeat:Connect(function()
    if _G.AccelEnabled then
        local char = LocalPlayer.Character
        local hum = char and char:FindFirstChildOfClass("Humanoid")
        local seat = hum and hum.SeatPart
        
        if seat and seat:IsA("VehicleSeat") then
            -- Cek apakah mobil bergerak (berarti Anda sedang tekan gas di layar)
            -- Kita deteksi lewat kecepatan fisik (Magnitude)
            if seat.AssemblyLinearVelocity.Magnitude > 1 then
                if not isWPressed then
                    -- Simulasikan pencet tombol W (Keyboard Virtual)
                    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.W, false, game)
                    isWPressed = true
                end
            else
                if isWPressed then
                    -- Lepas tombol W jika mobil berhenti
                    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.W, false, game)
                    isWPressed = false
                end
            end
        end
    else
        -- Jika mod dimatikan, pastikan W terlepas
        if isWPressed then
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.W, false, game)
            isWPressed = false
        end
    end
end)
